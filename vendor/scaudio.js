module.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function n(t){var e=t.resource_id||t.id||t.cid;if(!e)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return e}function r(t){O=t,t&&(D.AudioManagerStates=t.States,this.toggleMute(K.muted),this.setVolume(K.volume))}function o(t){var e,i=this.options;return e={id:this.getId(),src:t.url,duration:I.result(i.duration),mimeType:t.mimeType,forceSingle:i.useSinglePlayer},O.createAudioPlayer(e)}function s(t,e){var i=e?"on":"off";t[i]("stateChange",b,this)[i]("positionChange",u,this)[i]("loadedmetadata",a,this)}function a(){this.trigger(N.METADATA)}function u(){this._prevPosition!==this.currentTime()&&(this.trigger(N.TIME),this._prevPosition=this.currentTime())}function l(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function c(){l.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(N.RESET))}function h(){this._registerPlays=!0,this.pause(),this.trigger(N.FINISH)}function f(){var t=k();return this.streamInfo?t.resolve(this.streamInfo):d.call(this).then(function(e){var i=M.choosePreferredStream(e,this.options);i?t.resolve(i):(this.trigger(N.NO_PROTOCOL),this.options.debug&&window.console.warn(L("SCAudio (%s): Could not match a protocol of given media descriptor to one of the supported protocols ("+this.options.protocols+"), aborting attempt to play."),this.getId()),t.reject())}.bind(this)).fail(function(e){this.options.debug&&window.console.warn(L("Stream request failed with status: %d"),e.status),g.call(this,e),p.call(this,e),t.reject()}.bind(this)),t.promise()}function d(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var t=k();this._usedPrefetchUrls=!0;var e="function"==typeof this.options.streamUrls?this.options.streamUrls():this.options.streamUrls;return t.resolve(e),t.promise()}return this.ajax({type:"GET",url:I.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?Q:V})}function g(t){var e=t.status>=400&&-1!==(t.responseText||"").indexOf("geo_blocked");e&&this.trigger(N.GEO_BLOCKED)}function p(t){0===t.status&&this.trigger(N.NO_CONNECTION)}function m(t){var e=this._initAudioDefer&&this._initAudioDefer.state(),i=M.streamValidForPlayingFrom(this.streamInfo,t);return e&&("pending"===e||"resolved"===e&&i)}function T(t){t&&!this._bufferingTimeout?this._bufferingTimeout=setTimeout(function(){this._isBuffering=!0,this.trigger(N.BUFFERRING_START)}.bind(this),z):t||(this._bufferingTimeout&&(clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(N.BUFFERRING_END)))}function v(){this.off(N.TIME,this.seekTimeEventHandler),this.trigger(N.SEEKED),this.seekTimeEventHandler=null}function A(){this._errorRecoveryFlagsResetTimeout=setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),$)}function _(){this._errorRecoveryFlagsResetTimeout&&clearTimeout(this._errorRecoveryFlagsResetTimeout)}function y(){var t=this.isPlaying(),e=Date.now();return _.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+q>e&&this._errorRecoveryCounts>J?void this.trigger(N.AUDIO_ERROR,this):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,c.call(this),void(t&&this.play({seek:this.currentTime()})))}function E(t){this.logAudioError({error_id:t,has_flash:x.supportsFlash(),flash_plugin:x.flashPlugin(),playertype:this.controller?this.controller.getType():void 0,protocol:this.streamInfo?this.streamInfo.protocol:void 0,host:this.streamInfo?Y.getUrlHost(this.streamInfo.url):void 0,media_uri:this.streamInfo?this.streamInfo.url:void 0})}function S(){var t,e=O.Errors;if(!this.controller)return this.options.debug&&window.console.error(L("SCAudio: controller is null, aborting error handler ("+this.getId()+")."),this),E.call(this,null),void y.call(this);switch(t=this.controller&&this.controller.getErrorID(),this.options.debug&&("undefined"!=typeof this.controller.getErrorMessage?window.console.error(L("SCAudio error ("+this.getId()+"): "+this.controller.getErrorMessage())):window.console.error(L("SCAudio error ("+this.getId()+"): controller implementation lacks getErrorMessage function!"))),E.call(this,t),t){case e.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(N.FLASH_NOT_LOADED);break;case e.FLASH_PROXY_FLASH_BLOCKED:this.trigger(N.FLASH_BLOCK);break;case e.FLASH_RTMP_CONNECT_FAILED:I.without(this.options.protocols,j.RTMP);case e.FLASH_RTMP_CANNOT_PLAY_STREAM:case e.FLASH_RTMP_CONNECT_CLOSED:case e.HTML5_AUDIO_NETWORK:case e.HTML5_AUDIO_ABORTED:case e.HTML5_AUDIO_DECODE:case e.HTML5_AUDIO_SRC_NOT_SUPPORTED:case e.HTML5_AUDIO_ENDED_EARLY:y.call(this);break;case e.HTML5_AUDIO_OVERRUN:h.call(this);break;default:window.console.error(L("SCAudio ("+this.getId()+") does not handle audio error code: "+t),this)}}function w(t){switch(this.options.debug&&P.call(this,t),t){case N.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case N.PLAY:this._isPlaying=!1,this._isPlayActionQueued=!0;break;case N.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case N.BUFFERRING_START:case N.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case N.BUFFERRING_END:case N.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1)}}function b(t){var e=O.States,i=O.Errors;switch(t){case e.IDLE:R.call(this),this.controller&&this.controller.getErrorID()===i.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(N.FLASH_UNBLOCK);break;case e.PAUSED:R.call(this),T.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&v.call(this);break;case e.PLAYING:R.call(this),T.call(this,!1),A.call(this),this.trigger(N.PLAY_RESUME);break;case e.LOADING:case e.SEEKING:R.call(this),T.call(this,!0);break;case e.ENDED:R.call(this),h.call(this);break;case e.ERROR:T.call(this,!1),S.call(this)}this.trigger(N.STATE_CHANGE,t)}function P(t){var e,i=window.console.log;t!==N.TIME?(e=[L("SCAudio event ("+this.getId()+"):")],e.push.apply(e,arguments),i.apply(window.console,e),this._loggedTime=!1):this._loggedTime||(i.call(window.console,L("SCAudio time (%s): %d ms"),this.getId(),this.currentTime()),this._loggedTime=!0)}function L(t){return(new Date).toString()+" | "+t}function R(){this._initAudioDefer&&this._initAudioDefer.resolve()}var D,O,k=i(4).Deferred,x=i(5),I=i(3),M=i(15),C=i(11),F=i(12),N=i(1),H=i(13),U=i(6),j=i(2),B=i(14),Y=i(7),G={},K={muted:!1,volume:1},W={soundId:G,duration:G,registerEndpoint:G,streamUrlsEndpoint:G,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[j.HLS,j.RTMP,j.HTTP],extensions:[H.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null},V=6e3,Q=6e3,z=400,X=6e4,q=6e3,J=3,$=3e4,Z=[];D=t.exports=function(t,e){if(1===arguments.length?e=t:D.setAudioManager(t),!O)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=I.extend({},W,e);var i=Object.keys(this.options).filter(function(t){return this.options[t]===G},this);if(i.length)throw new Error("SCAudio: pass into constructor the following options: "+i.join(", "));B.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this.on("all",w,this),this.audioPerfMonitor=new F(this,this.logAudioPerformance.bind(this)),this.audioLogger=new C(this)},I.extend(D.prototype,U,{constructor:D,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=k(),f.call(this).then(function(t){var e=!0;this.streamInfo&&(e=!1),this.streamInfo=t,e&&this.trigger(N.STREAMS),this.controller=o.call(this,t),s.call(this,this.controller,!0),b.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(N.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(N.CREATED)}.bind(this))),this._initAudioDefer.promise()},registerPlay:function(){var t=this.options.soundId,e=!1;return-1===Z.indexOf(t)&&(Z.push(t),setTimeout(function(){var e=Z.indexOf(t);e>-1&&Z.splice(e,1)},X),this.ajax({type:"POST",url:I.result(this.options.registerEndpoint),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(N.REGISTERED),e=!0),e},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(t){var e=t&&null!=t.seek?t.seek:this.currentTime();t=I.extend({},t,{position:e}),this.trigger(N.PLAY,t),m.call(this,e)||c.call(this),this.initAudio().then(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(N.PLAY_START,t),this.controller&&this.controller.play(e))}.bind(this)),T.call(this,!0)},pause:function(t){this.isPaused()||(t=I.extend({},t,{position:this.currentTime()}),this.trigger(N.PAUSE,t),this.controller&&this.controller.pause(),T.call(this,!1))},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,I.without(Z,this.options.soundId),clearTimeout(this._bufferingTimeout),l.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(N.DESTROYED),this.off()},seek:function(t){return this.controller?t>=I.result(this.options.duration)?void h.call(this):(this.seekTimeEventHandler&&this.off(N.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=I.after(2,function(){v.call(this)}.bind(this)),this.on(N.TIME,this.seekTimeEventHandler),this.trigger(N.SEEK,{from:this.currentTime(),to:t}),this.isPlaying()&&!m.call(this,t)?(c.call(this),void this.play({seek:t})):void this.controller.seek(t)):void 0},seekRelative:function(t){this.controller&&this.seek(this.currentTime()+t)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var t=0;return this.controller&&(t=this.controller.getLoadedPosition()/this.controller.getDuration(),t=t>=.99?1:t),t},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==O.States.LOADING)},toggleMute:function(t){D.toggleMute(t)},isMuted:function(){return D.isMuted()},setVolume:function(t){D.setVolume(t)},getVolume:function(){return D.getVolume()},logAudioPerformance:function(t){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(t)},logAudioError:function(t){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(t)},getAudioManagerStates:function(){return O.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(t,e){var i=n(t);if(this._modelListeners[i])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[i]=e=e.bind(this,t),this.on("all",e)},unregisterModelEventListener:function(t){var e=n(t);this._modelListeners[e]&&(this.off("all",this._modelListeners[e]),delete this._modelListeners[e])},ajax:function(t){return this.options.ajax?this.options.ajax(t):I.ajax(t)}}),I.extend(D,{extend:I.inherits,getSettings:function(){return K},setSettings:function(t){I.extend(K,t)},setAudioManager:r,setAudioManagerOnce:I.once(r),toggleMute:function(t){K.muted=void 0===t?!K.muted:!!t,O&&O.setVolume(K.muted?0:1)},isMuted:function(){return K.muted},setVolume:function(t){K.volume=void 0===t?1:t,O&&O.setVolume(K.volume)},getVolume:function(){return K.volume},Extensions:H,Protocols:j,Events:N,BUFFER_DELAY:z,PLAY_REGISTRATION_TIMEOUT:X})},function(t,e){var i={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered"};t.exports=i},function(t,e){var i={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=i},function(t,e,i){var n=i(4).Deferred,r={ajax:function(t){var e,i,r,o,s,a;r=t.data||null,i=t.url,e=t.type,o=t.dataType,s=t.async,a=t.timeout;var u,l,c,h=n();return void 0===s&&(s=!0),u=new XMLHttpRequest,u.open(e,i,s),s&&(u.responseType="text"),u.onreadystatechange=function(){return 4==u.readyState?(clearTimeout(c),0!=u.status&&u.status<400?(l="json"==o?JSON.parse(u.responseText):u.responseText,void h.resolve(l)):void h.reject(u)):void 0},void 0!==a&&(c=setTimeout(function(){4!=u.readyState&&(u.abort(),h.reject(u))},a)),u.send(r),h.promise()},extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}),t},each:function(t,e,i){Object.keys(t).forEach(function(n){e.call(i||null,t[n],n)})},find:function(t,e,i){var n;return t.some(function(t){return e.call(i,t)?(n=t,!0):void 0}),n},has:function(t,e){return Object.keys(t).indexOf(e)>-1},inherits:function(t,e){var i,n=this;i=t&&r.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},r.extend(i,n,e);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&r.extend(i.prototype,t),i.__super__=n.prototype,i},without:function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)},result:function(t){var e=t;return r.isFunction(e)&&(e=t()),e},isFunction:function(t){return"function"==typeof t},after:function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},isNull:function(t){return null===t},once:function(t){var e,i=!1;return function(){return i?e:(i=!0,void(e=t.apply(this,arguments)))}}};t.exports=r},function(t,e,i){t.exports=i(10)},function(t,e){function i(t){return t.test(window.navigator.userAgent.toLowerCase())}function n(t,e){try{return window.navigator.userAgent.toLowerCase().match(t)[e]}catch(i){return null}}function r(){try{return parseInt(n(/chrom(e|ium)\/([0-9]+)\./,2))}catch(t){return NaN}}function o(){return!u()&&i(/safari/)}function s(){return o()&&i(/version\/7\.1/)}function a(){return o()&&i(/version\/8/)}function u(){return i(/chrom(e|ium)/)}function l(){return i(/firefox/)}function c(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(t){return!1}}function h(){try{var t=o()&&i(/version\/5\.0/),e=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!t&&e}catch(n){return!1}}function f(){return g(d())>=m}function d(){var t,e,i,n;if("undefined"!=typeof window.ActiveXObject)try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),n&&(t=n.GetVariable("$version"))}catch(r){}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(i="application/x-shockwave-flash",e=window.navigator.mimeTypes,e&&e[i]&&e[i].enabledPlugin&&e[i].enabledPlugin.description&&(t=e[i].enabledPlugin.description));return t}function g(t){if(!t)return 0;var e=t.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([e[0],e[1]].join("."))||0}var p,m=9;p={flashPlugin:d,isSafari:o,isSafari71:s,isSafari8:a,isChrome:u,getChromeVersion:r,isFirefox:l,supportsHLSAudio:h,supportsHTML5Audio:c,supportsFlash:f},t.exports=p},function(t,e){function i(t,e,i,n){if(!i)return!0;if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&t[e].apply(t,[o,i[o]].concat(n));else{if(!r.test(i))return!0;for(var s=i.split(r),a=0,u=s.length;u>a;a++)t[e].apply(t,[s[a]].concat(n))}}function n(t,e){var i,n=-1,r=t.length;switch(e.length){case 0:for(;++n<r;)i=t[n],i.callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,e[0]);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,e[0],e[1]);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,e[0],e[1],e[2]);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e)}}var r=/\s+/,o={on:function(t,e,n){if(!i(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},off:function(t,e,n){var r,o,s,a,u,l,c,h;if(!this._events||!i(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:Object.keys(this._events),u=0,l=a.length;l>u;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,h=s.length;h>c;c++)o=s[c],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1);if(!i(this,"trigger",t,e))return this;var r=this._events[t],o=this._events.all;return r&&n(r,e),o&&n(o,arguments),this}};t.exports=o},function(t,e){var i={getUrlParams:function(t){var e={},i=t.indexOf("?");return i>-1&&t.substr(i+1).split("&").forEach(function(t){var i=t.split("=");e[i[0]]=i[1]}),e},getUrlHost:function(t){var e,i=t.split("//");return e=i[0]===t?i[0].split("/")[0]:i[1]?i[1].split("/")[0]:""}};t.exports=i},function(t,e,i){function n(t){var e=s[t]={};return r.each(t.split(o),function(t,i){e[i]=!0}),e}var r=t.exports=i(9),o=/\s+/,s={};r.Callbacks=function(t){t="string"==typeof t?s[t]||n(t):r.extend({},t);var e,i,o,a,u,l,c=[],h=!t.once&&[],f=function(n){for(e=t.memory&&n,i=!0,l=a||0,a=0,u=c.length,o=!0;c&&u>l;l++)if(c[l].apply(n[0],n[1])===!1&&t.stopOnFalse){e=!1;break}o=!1,c&&(h?h.length&&f(h.shift()):e?c=[]:d.disable())},d={add:function(){if(c){var i=c.length;!function n(e){r.each(e,function(e,i){var o=r.type(i);"function"===o?t.unique&&d.has(i)||c.push(i):i&&i.length&&"string"!==o&&n(i)})}(arguments),o?u=c.length:e&&(a=i,f(e))}return this},remove:function(){return c&&r.each(arguments,function(t,e){for(var i;(i=r.inArray(e,c,i))>-1;)c.splice(i,1),o&&(u>=i&&u--,l>=i&&l--)}),this},has:function(t){return r.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=h=e=void 0,this},disabled:function(){return!c},lock:function(){return h=void 0,e||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||i&&!h||(o?h.push(e):f(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d}},function(t,e){function i(t){return null==t?String(t):c[l.call(t)]||"object"}function n(t){return"function"===u.type(t)}function r(t){return"array"===u.type(t)}function o(t,e,i){var r,o=0,s=t.length,a=void 0===s||n(t);if(i)if(a){for(r in t)if(e.apply(t[r],i)===!1)break}else for(;s>o&&e.apply(t[o++],i)!==!1;);else if(a){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(;s>o&&e.call(t[o],o,t[o++])!==!1;);return t}function s(t){return t&&"object"===u.type(t)?!0:!1}function a(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||u.isFunction(s)||(s={}),l===a&&(s=this,--a);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(c&&n&&(u.isPlainObject(n)||(r=u.isArray(n)))?(r?(r=!1,o=i&&u.isArray(i)?i:[]):o=i&&u.isPlainObject(i)?i:{},s[e]=u.extend(c,o,n)):void 0!==n&&(s[e]=n));return s}var u=t.exports={type:i,isArray:r,isFunction:n,isPlainObject:s,each:o,extend:a,noop:function(){}},l=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){c["[object "+t+"]"]=t.toLowerCase()})},function(t,e,i){/*!
	* jquery-deferred
	* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
	* MIT Licensed
	*/
var n=t.exports=i(8),r=Array.prototype.slice;n.extend({Deferred:function(t){var e=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n.Deferred(function(i){n.each(e,function(e,r){var s=r[0],a=t[e];o[r[1]](n.isFunction(a)?function(){var t=a.apply(this,arguments);t&&n.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===o?i:this,[t])}:i[s])}),t=null}).promise()},promise:function(t){return null!=t?n.extend(t,r):r}},o={};return r.pipe=r.then,n.each(e,function(t,n){var s=n[2],a=n[3];r[n[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[n[0]]=s.fire,o[n[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,o,s=0,a=r.call(arguments),u=a.length,l=1!==u||t&&n.isFunction(t.promise)?u:0,c=1===l?t:n.Deferred(),h=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?r.call(arguments):o,n===e?c.notifyWith(i,n):--l||c.resolveWith(i,n)}};if(u>1)for(e=new Array(u),i=new Array(u),o=new Array(u);u>s;s++)a[s]&&n.isFunction(a[s].promise)?a[s].promise().done(h(s,o,a)).fail(c.reject).progress(h(s,i,e)):--l;return l||c.resolveWith(o,a),c.promise()}})},function(t,e,i){function n(t){this.listenTime+=t.from-this.currentTime,this.currentTime=t.to}function r(t){this.listenTime+=t.position-this.currentTime,this.currentTime=t.position}function o(t){this.currentTime=t.position}var s,a=i(1);s=t.exports=function(t){this.scAudio=t,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,n,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(t,e,i){function n(t){return"AudioPerfMonitor ("+this.scAudio.getId()+") : "+t}function r(){return this.scAudio.controller?this.controller?void this.printWarning(n.call(this,"Setup was called while it was already initialized (returned with a no-op)")):(this.scAudio.options.debug&&window.console.info(n.call(this,"Initialized for instance %s"),this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=_.getUrlHost(this.scAudio.streamInfo.url))):void this.printWarning("CanÂ´t initialize when controller is null")}function o(){return this.controller?(this.scAudio.options.debug&&window.console.info(n.call(this,"Reset for instance %s"),this.scAudio.getId()),this.controller=null,this.protocol=null,this.host=null,void(this.timeToPlayMeasured=!1)):void this.printWarning(n.call(this,"Reset was called while it was already de-initialized (returned with a no-op)"))}function s(t){var e=this.scAudio.getAudioManagerStates();t===e.LOADING?this.timeToPlayMeasured&&d.call(this):y.isNull(this.bufferingStartTime)||g.call(this)}function a(){this.metadataLoadStartTime=Date.now()}function u(){return y.isNull(this.metadataLoadStartTime)?void this.printWarning(n.call(this,"onMetadataEnd was called without onMetadataStart being called before.")):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function l(){this.playClickTime=Date.now()}function c(){if(!this.timeToPlayMeasured){if(y.isNull(this.playClickTime))return void this.printWarning(n.call(this,"onPlayResume was called without onPlayStart being called before."));this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function h(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function f(){if(!this.scAudio.isPaused()){if(y.isNull(this.seekStartTime))return void this.printWarning(n.call(this,"onSeekEnd was called without onSeekStart being called before."));this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function d(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function g(){return y.isNull(this.bufferingStartTime)?void this.printWarning(n.call(this,"onBufferingEnd was called without onBufferingStart being called before.")):(p.call(this),void(this.bufferingStartTime=null))}function p(){y.isNull(this.bufferingStartTime)||(y.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function m(){p.call(this),y.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var T,v=i(1),A=i(6),_=i(7),y=i(3);T=t.exports=function(t,e){this.scAudio=t,this.logFn=e,this.controller=null,this.reset(),t.on(v.CREATED,r,this).on(v.RESET,o,this).on(v.DESTROYED,o,this).on(v.SEEK,h,this).on(v.SEEKED,f,this).on(v.PLAY,l,this).on(v.PLAY_START,a,this).on(v.PLAY_RESUME,c,this).on(v.PAUSE,m,this).on(v.FINISH,m,this).on(v.STATE_CHANGE,s,this).on(v.METADATA,u,this)},y.extend(T.prototype,A,{constructor:T,log:function(t){return this.controller?(y.extend(t,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),this.scAudio.options.debug&&window.console.info(n.call(this,"%s latency: %d protocol: %s host: %s playertype: %s"),t.type,t.latency,t.protocol,t.host,t.playertype),void this.logFn(t)):void this.printWarning(n.call(this,"Monitor log was called while controller is null (returned with a no-op)"))},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1},printWarning:function(t){this.scAudio.options.debug&&window.console.warn(t)}})},function(t,e){var i={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};t.exports=i},function(t,e,i){function n(t){return l.isChrome()&&l.getChromeVersion()>=35&&t.mediaSourceEnabled||l.isSafari()&&l.supportsHLSAudio()}function r(t){return function(e){var i=!1;switch(e){case u.RTMP:i=l.supportsFlash();break;case u.HTTP:i=l.supportsHTML5Audio()||l.supportsFlash();break;case u.HLS:i=n(t)}return i}}function o(t){return(l.isSafari71()||l.isSafari8()||l.isFirefox())&&(t=[u.HTTP,u.HLS,u.RTMP]),t}function s(t){t.protocols=o(t.protocols).filter(r(t))}var a,u=i(2),l=i(5);a={prioritizeAndFilter:s},t.exports=a},function(t,e,i){function n(t,e){if(!t)return!1;var i=t.issuedAt+r(t.protocol,t.duration);return o(t.protocol)?Date.now()+t.duration-(e||0)<i:Date.now()<i}function r(t,e){var i=o(t);return h+(i?l.result(e):0)}function o(t){return t===u.HTTP||t===u.HLS}function s(t,e){function i(t,e){return Math.abs(e-p)-Math.abs(t-p)}function n(t){return-1*t}var r,o,s,a,u,c,h,f,d,g={},p=e.maxBitrate,m=e.protocols,T=e.extensions;for(l.each(t,function(t,e){var i=e.split("_"),n=i[0],r=i[1],o=i[2];g[n]=g[n]||{},g[n][r]=g[n][r]||{},g[n][r][o]=t}),u=0,c=m.length;c>u;++u)for(a=m[u],f=0,d=T.length;d>f;++f)if(h=T[f],g[a]&&g[a][h])return r=Object.keys(g[a][h]).map(Number).sort(n),o=p===1/0,s=p===-(1/0),p=o||s?r[o?"pop":"shift"]():r.sort(i).pop(),{url:g[a][h][p],bitrate:p,protocol:a,extension:h,issuedAt:Date.now(),duration:l.result(e.duration)};return null}var a,u=i(2),l=i(3),c=.9,h=Math.floor(12e4*c);a=t.exports={choosePreferredStream:s,streamValidForPlayingFrom:n},t.exports=a}]);